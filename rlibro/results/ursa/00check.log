* using log directory ‘/var/scratch2/tomas/cran/rlibro/check/ursa.Rcheck’
* using R Under development (unstable) (2020-03-19 r78011)
* using platform: x86_64-pc-linux-gnu (64-bit)
* using session charset: UTF-8
* checking for file ‘ursa/DESCRIPTION’ ... OK
* checking extension type ... Package
* this is package ‘ursa’ version ‘3.8.17’
* checking package namespace information ... OK
* checking package dependencies ... OK
* checking if this is a source package ... OK
* checking if there is a namespace ... OK
* checking for executable files ... OK
* checking for hidden files and directories ... OK
* checking for portable file names ... OK
* checking for sufficient/correct file permissions ... OK
* checking whether package ‘ursa’ can be installed ... OK
* checking package directory ... OK
* checking DESCRIPTION meta-information ... OK
* checking top-level files ... OK
* checking for left-over files ... OK
* checking index information ... OK
* checking package subdirectories ... OK
* checking R files for non-ASCII characters ... OK
* checking R files for syntax errors ... OK
* checking whether the package can be loaded ... OK
* checking whether the package can be loaded with stated dependencies ... OK
* checking whether the package can be unloaded cleanly ... OK
* checking whether the namespace can be loaded with stated dependencies ... OK
* checking whether the namespace can be unloaded cleanly ... OK
* checking loading without being on the library search path ... OK
* checking dependencies in R code ... OK
* checking S3 generic/method consistency ... OK
* checking replacement functions ... OK
* checking foreign function calls ... OK
* checking R code for possible problems ... OK
* checking Rd files ... OK
* checking Rd metadata ... OK
* checking Rd cross-references ... OK
* checking for missing documentation entries ... OK
* checking for code/documentation mismatches ... OK
* checking Rd \usage sections ... OK
* checking Rd contents ... OK
* checking for unstated dependencies in examples ... OK
* checking line endings in C/C++/Fortran sources/headers ... OK
* checking compiled code ... NOTE
Note: information on .o files is not available
* checking examples ... ERROR
Running examples in ‘ursa-Ex.R’ failed
The error most likely occurred in:

> ### Name: as.Raster
> ### Title: Coercion to package 'raster' objects
> ### Aliases: as.Raster as.Raster.ursaRaster as.Raster.list
> ###   as.Raster.ursaStack as.Raster.NULL
> ### Keywords: methods
> 
> ### ** Examples
> 
> session_grid(NULL)
> if (requireNamespace("raster")) {
+    require(methods) ## need to 'raster::plot'
+    msk <- ursa_dummy(1,min=0,max=100)>40
+    a1 <- ursa_dummy(1,min=200,max=500)[msk]
+    a2 <- colorize(a1,ramp=FALSE)
+    a3 <- as.integer(ursa_dummy(3,min=0,max=255.99))
+    a4 <- ursa_stack(a3[msk])
+    if (isLayer <- TRUE) {
+       print(a1)
+       r1 <- as.Raster(a1)
+       message(as.character(class(r1)))
+       print(r1)
+       raster::plot(r1)
+       b1 <- as.ursa(r1)
+       print(c(exported=a1,imported=b1,failed=b1-a1))
+       print(c(theSameValue=identical(ursa_value(a1),ursa_value(b1))
+              ,rheSameGrid=identical(ursa_grid(a1),ursa_grid(b1))))
+    }
+    if (isLayerColortable <- TRUE) {
+       r2 <- as.Raster(a2)
+       message(as.character(class(r2)))
+       print(r2)
+       raster::plot(r2)
+       b2 <- as.ursa(r2)
+       print(c(theSameValue=identical(ursa_value(a2),ursa_value(b2))
+              ,rheSameGrid=identical(ursa_grid(a2),ursa_grid(b2))))
+    }
+    if (isBrickOrRGB <- TRUE) {
+       r3 <- as.Raster(a3)
+       message(as.character(class(r3)))
+       print(r3)
+       raster::plot(r3)
+       raster::plotRGB(r3)
+       b3 <- as.ursa(r3)
+       print(c(theSameValue=identical(ursa_value(a3),ursa_value(b3))
+              ,rheSameGrid=identical(ursa_grid(a3),ursa_grid(b3))))
+    }
+    if (isStack <- TRUE) {
+       r4 <- as.Raster(a4)
+       message(as.character(class(r4)))
+       print(r4)
+       raster::plot(r4)
+       b4 <- as.ursa(r4)
+       print(c(theSameValue=identical(ursa_value(a4),ursa_value(b4))
+              ,theSameGrid=identical(ursa_grid(a4),ursa_grid(b4))))
+    }
+ }
Loading required namespace: raster
           name    mean      sd      sum     min     max     n   nNA
[1] Thursday 19 355.626 47.6125 35309381 258.728 470.206 99288 36904
NOTE: rgdal::checkCRSArgs: no proj_defs.dat in PROJ.4 shared files
RasterLayer
class      : RasterLayer 
dimensions : 448, 304, 136192  (nrow, ncol, ncell)
resolution : 25000, 25000  (x, y)
extent     : -3850000, 3750000, -5350000, 5850000  (xmin, xmax, ymin, ymax)
crs        : +proj=stere +lat_0=90 +lat_ts=70.0 +lon_0=-45.0 +k=1 +x_0=0.0 +y_0=0.0 +a=6378273.000 +b=6356889.449 +units=m +no_defs 
source     : memory
names      : Thursday.19 
values     : 258.7284, 470.206  (min, max)

Error in as.double(y) : 
  cannot coerce type 'S4' to vector of type 'double'
Calls: <Anonymous> -> <Anonymous> -> plot.default -> xy.coords
Execution halted
* checking PDF version of manual ... OK
* DONE
Status: 1 ERROR, 1 NOTE
